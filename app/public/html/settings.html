<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Settings</title>
    <!-- Removed inline styles, using Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <script src="/public/js/alerts.js" type="module"></script>
  </head>
  <body class="bg-black text-white font-sans overflow-hidden">
    <!-- Alert Container -->
    <div id="alert-container"
      class="fixed top-4 left-1/2 -translate-x-1/2 z-50 w-auto max-w-[90%] flex flex-col gap-2"></div>

    <!-- Top Bar with Back Button -->
    <div class="absolute top-3 left-3">
      <button onclick="location.href='/'"
        class="px-4 py-2 bg-gray-600 hover:bg-gray-700 rounded text-white font-bold cursor-pointer">
        Back
      </button>
    </div>

    <!-- Settings Container -->
    <div
      class="absolute top-[60px] left-1/2 -translate-x-1/2 w-[500px] max-w-[95%] bg-gray-900 rounded-lg p-5 flex flex-col items-center gap-5 shadow-md shadow-neutral-600">
      <!-- Profile Picture - ID matches JS -->
      <img id="avatar-preview"
        class="w-24 h-24 rounded-full object-cover cursor-pointer border-2 border-gray-600 hover:border-gray-500"
        src="/public/img/default_avatar.webp" alt="User profile picture" title="Click to change profile picture" />
      <input type="file" id="avatar" name="avatar" accept="image/*" class="hidden" />

      <!-- Settings Form -->
      <form id="settings-form" onsubmit="handleSubmit(event)" class="w-full flex flex-col items-center gap-4">
        <!-- Username Field -->
        <div class="w-4/5">
          <label for="username" class="block mb-1 text-sm font-medium text-gray-300">Username</label>
          <input id="username" type="text" title="Enter your desired username"
            class="w-full px-3 py-2 border-2 border-gray-700 bg-gray-800 text-white text-base rounded focus:outline-none focus:border-blue-600" />
        </div>

        <!-- Password Field -->
        <div class="w-4/5">
          <label for="password" class="block mb-1 text-sm font-medium text-gray-300">Password (leave blank to keep
            unchanged)</label>
          <input id="password" type="password" title="Enter a new password or leave blank to keep current"
            class="w-full px-3 py-2 border-2 border-gray-700 bg-gray-800 text-white text-base rounded focus:outline-none focus:border-blue-600" />
        </div>

        <!-- Confirm Button -->
        <button type="submit"
          class="px-5 py-2 bg-gray-600 hover:bg-gray-700 rounded text-white font-bold cursor-pointer w-[150px]">
          Confirm Changes
        </button>
      </form>
    </div>

    <!-- Script Includes -->
    <script src="/public/js/auto.js"></script>
    <!-- Removed duplicate tailwind/lucide scripts -->
    <script src="/public/js/home.js" type="module"></script>
    <script src="/public/js/settings.js"></script>
    <script>
      // Initialize Lucide icons if needed after dynamic content load
      lucide.createIcons();
    </script>

  </body>
</html>